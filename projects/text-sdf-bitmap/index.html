---
title: Rendering Text in WebVR
---

<div class="container container-narrow">

	<h2>{{ page.title }}</h2>

	<div class="mb-3">
		<a href="https://developers.google.com/web/showcase/2017/within" class="btn btn-primary">Article</a>
		<a href="https://github.com/davidlyons/text-sdf-bitmap" class="btn btn-primary">GitHub</a>
		<a href="http://davidscottlyons.com/text-sdf-bitmap/" class="btn btn-primary">Example</a>
	</div>

	<a href="http://davidscottlyons.com/text-sdf-bitmap/">
		<img src="images/text-sdf-bitmap.png" class="img-fluid mb-3" alt="SDF Bitmap Text example">
	</a>

	<p>In 2016, I needed to figure out how to render text in WebVR for <a href="{{ "/projects/within" | relative_url }}">WITHIN's WebVR site</a>. Because WebVR relies on a canvas element, text rendering must be done in canvas, in the 3D scene. I spent some time researching and evaluating different text rendering methods, and found that <a href="https://github.com/libgdx/libgdx/wiki/Distance-field-fonts">signed distance field bitmap fonts</a> are the most effective and efficient way to render arbitrary blocks of text in WebVR. So I created a bitmap font with <a href="https://github.com/libgdx/libgdx/wiki/Hiero">Hiero</a> (.fnt and .png), <a href="http://browserify.org/">browserified</a> Matt DesLauriers' <a href="https://github.com/Jam3/three-bmfont-text">three-bmfont-text</a> and converted my .fnt files to .json to remove the load-bmfont and Node dependencies, then wrote a convenience wrapper to handle the creation of text objects with the .png and .json assets:</p>

	<div class="row">
		<div class="col-sm-6">
			<img src="images/roboto-bold-bitmap.png" class="img-fluid" alt="Roboto Bitmap PNG">
		</div>
		<div class="col-sm-6">
			<img src="images/roboto-bold-json.png" class="img-fluid" alt="Roboto Bitmap JSON">
		</div>
	</div>

	<p>In February 2017, I wrote an <a href="https://developers.google.com/web/showcase/2017/within">article</a> that was published on Google's developer blog documenting and explaining how to generate a bitmap font with Hiero and how to use the font in Three.js with my wrapper. My <a href="http://davidscottlyons.com/text-sdf-bitmap/">example</a> on <a href="https://github.com/davidlyons/text-sdf-bitmap">GitHub</a> demonstrates the typography capabilities of <a href="https://github.com/Jam3/layout-bmfont-text">layout-bmfont-text</a> with the dat.gui sliders and includes a bitmap version of <a href="https://fonts.google.com/specimen/Roboto">Roboto</a> that you can use in your own projects. My usage has changed a bit since the Google dev blog article was written.</p>

	<h3>Usage</h3>

{% highlight html %}
<script src="three-bmfont-text-bundle.js"></script>
<script src="sdf-shader.js"></script>
<script src="text-bitmap.js"></script>
{% endhighlight %}

{% highlight javascript %}
var robotoBoldKey = 'roboto-bold';
var fileName = './fonts/roboto/bitmap/' + robotoBoldKey;
var jsonPath = fileName + '.json';
var imagePath = fileName + '.png';

// load the Roboto bitmap font assets and assign them to the key
TextBitmap.load( robotoBoldKey, jsonPath, imagePath );

// after the assets load, you can pass the font key to the TextBitmap constructor
THREE.DefaultLoadingManager.onLoad = function ( ) {

	// fontKey and text are required, the rest are optional
	var bmtext = new TextBitmap({
		text: 'Grumpy wizards make toxic brew for the evil Queen and Jack.',
		fontKey: robotoBoldKey,
		width: 1000,
		align: 'center',
		valign: 'center',
		lineHeight: 80,
		letterSpacing: 1,
		scale: 0.0004,
		color: '#fff',
		outlineColor: '#000'
	});

	// TextBitmap inherits THREE.Group
	// so you can add instances to the scene
	// and position, scale or rotate them
	scene.add( bmtext );
	bmtext.position.set( 0, 1, -0.5 );

	// you can also change the text by setting the text property
	bmtext.text = 'The quick brown fox jumps over the lazy dog.';

};
{% endhighlight %}

</div>